<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wheelchair Maintenance Reminder</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="https://favicon.io/favicon.ico">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Wheelchair Reminder">
</head>
<body>
  <div class="container">
    <h1>Wheelchair Maintenance Reminder</h1>
    <div class="card">
      <div class="mb-4">
        <label class="label">Equipment Type</label>
        <select id="equipment" class="select">
          <option value="">Select equipment</option>
          <option value="Rigid Ultra-Light Manual Wheelchair">Rigid Ultra-Light Manual Wheelchair</option>
          <option value="Folding Ultra-Light Manual Wheelchair">Folding Ultra-Light Manual Wheelchair</option>
          <option value="Hand-Rim Activated Power Assist">Hand-Rim Activated Power Assist</option>
          <option value="Detachable Power Assist">Detachable Power Assist</option>
          <option value="Power Wheelchair with Power Seating Functions">Power Wheelchair with Power Seating Functions</option>
          <option value="Power Wheelchair without Power Seating Functions">Power Wheelchair without Power Seating Functions</option>
          <option value="Air Backrest Cushion">Air Backrest Cushion</option>
          <option value="Foam Backrest Cushion">Foam Backrest Cushion</option>
          <option value="Foam Seat Cushion">Foam Seat Cushion</option>
          <option value="Gel Seat Cushion">Gel Seat Cushion</option>
          <option value="Air Seat Cushion">Air Seat Cushion</option>
        </select>
      </div>
      <button class="button" onclick="setReminders()">Set Reminders</button>
    </div>
    <div id="reminders" class="reminders" style="display: none;">
      <h2>Scheduled Reminders</h2>
      <ul id="reminder-list"></ul>
    </div>
    <div id="error" class="error" style="display: none;"></div>
  </div>
  <script>
    const MAINTENANCE_SCHEDULES = {
      "Rigid Ultra-Light Manual Wheelchair": {
        camber: { task: "Check camber plug clamps and axle sleeves for tightness", frequency: "weekly", redFlag: "Contact vendor if clamps or sleeves are loose" },
        handrims: { task: "Inspect handrims for rough edges or peeling", frequency: "3 months", redFlag: "Contact vendor if handrims are damaged" },
        wheel_locks: { task: "Ensure wheel locks prevent movement", frequency: "weekly", redFlag: "Contact vendor if locks fail to engage" },
        seat_sling: { task: "Inspect seat sling for rips or sagging", frequency: "weekly", redFlag: "Replace sling if torn or sagging" },
        casters: { task: "Inspect caster wheels and forks for cracks and wear", frequency: "weekly", redFlag: "Contact vendor if casters are damaged" },
        armrests: { task: "Ensure armrest hardware is securely attached", frequency: "weekly", redFlag: "Contact vendor if armrests are loose" },
        footrests: { task: "Ensure footrest hardware is securely attached", frequency: "weekly", redFlag: "Contact vendor if footrests are loose" },
        anti_tips: { task: "Inspect anti-tip wheels for cracks and wear", frequency: "weekly", redFlag: "Contact vendor if anti-tips are damaged" },
        frame: { task: "Inspect frame for cracks", frequency: "3 months", redFlag: "Contact vendor if cracks detected" },
        service: { task: "Complete inspection by authorized dealer", frequency: "yearly", redFlag: "Schedule service if not done annually" }
      },
      "Folding Ultra-Light Manual Wheelchair": {
        folding: { task: "Check folding mechanism for smooth operation", frequency: "weekly", redFlag: "Contact vendor if mechanism sticks" },
        handrims: { task: "Inspect handrims for rough edges or peeling", frequency: "3 months", redFlag: "Contact vendor if handrims are damaged" },
        wheel_locks: { task: "Ensure wheel locks prevent movement", frequency: "weekly", redFlag: "Contact vendor if locks fail to engage" },
        seat_sling: { task: "Inspect seat sling for rips or sagging", frequency: "weekly", redFlag: "Replace sling if torn or sagging" },
        casters: { task: "Inspect caster wheels and forks for cracks and wear", frequency: "weekly", redFlag: "Contact vendor if casters are damaged" },
        armrests: { task: "Ensure armrest hardware is securely attached", frequency: "weekly", redFlag: "Contact vendor if armrests are loose" },
        footrests: { task: "Ensure footrest hardware is securely attached", frequency: "weekly", redFlag: "Contact vendor if footrests are loose" },
        anti_tips: { task: "Inspect anti-tip wheels for cracks and wear", frequency: "weekly", redFlag: "Contact vendor if anti-tips are damaged" },
        frame: { task: "Inspect frame for cracks", frequency: "3 months", redFlag: "Contact vendor if cracks detected" },
        service: { task: "Complete inspection by authorized dealer", frequency: "yearly", redFlag: "Schedule service if not done annually" }
      },
      "Hand-Rim Activated Power Assist": {
        exterior: { task: "Visually check components for damage", frequency: "daily", redFlag: "Contact dealer if components are damaged" },
        anti_tip: { task: "Ensure anti-tip device is in correct position and locked", frequency: "daily", redFlag: "Contact dealer if anti-tip is loose" },
        tires: { task: "Check tires for depth, cracks, and inflate (e.g., 450 kPa)", frequency: "daily", redFlag: "Contact dealer if pressure drops significantly" },
        brakes: { task: "Ensure parking brakes stop wheels and are secure", frequency: "daily", redFlag: "Contact dealer if brakes fail" },
        wheels: { task: "Check wheels for deformation and broken spokes", frequency: "daily", redFlag: "Contact dealer if wheels are damaged" },
        casters: { task: "Check caster tires and forks for cracks and wear", frequency: "daily", redFlag: "Contact dealer if casters are damaged" },
        battery: { task: "Check battery residual capacity", frequency: "daily", redFlag: "Contact dealer if battery fails to charge" },
        cleaning: { task: "Wipe down with damp towel and neutral detergent", frequency: "weekly", redFlag: "Avoid water hosing; contact dealer if damage occurs" },
        service: { task: "Complete inspection by authorized dealer", frequency: "6 months", redFlag: "Schedule service if not done every 6 months" }
      },
      "Detachable Power Assist": {
        inspection: { task: "Inspect components for damage", frequency: "daily", redFlag: "Contact dealer if broken or cracked parts found" },
        rollers: { task: "Check rollers for wear or flats", frequency: "weekly", redFlag: "Contact dealer if rollers are significantly worn" },
        cables: { task: "Check cables for fraying or damage", frequency: "weekly", redFlag: "Contact dealer if cables are damaged" },
        clamp: { task: "Ensure clamp is secure and not rotated", frequency: "weekly", redFlag: "Contact dealer if clamp is loose" },
        motor: { task: "Check for abnormal motor activation/deactivation", frequency: "weekly", redFlag: "Contact dealer if motor issues occur" },
        cleaning: { task: "Wipe down with damp cloth", frequency: "monthly", redFlag: "Contact dealer if cleaning causes damage" },
        firmware: { task: "Update firmware via app", frequency: "monthly", redFlag: "Contact dealer if firmware update fails" },
        service: { task: "Complete inspection by authorized dealer", frequency: "yearly", redFlag: "Schedule service if not done annually" }
      },
      "Power Wheelchair with Power Seating Functions": {
        battery: { task: "Check battery level and charge if necessary", frequency: "daily", redFlag: "Contact vendor if battery fails to charge" },
        joystick: { task: "Check joystick panel for damage", frequency: "daily", redFlag: "Contact vendor if joystick is unresponsive" },
        parts: { task: "Ensure all removable parts are securely fastened", frequency: "daily", redFlag: "Contact vendor if parts are loose" },
        belts: { task: "Check positioning belts for wear and buckle functionality", frequency: "daily", redFlag: "Replace belts if worn or buckles fail" },
        tires: { task: "Check tires and inflate (30–45 psi)", frequency: "weekly", redFlag: "Contact vendor if pressure drops significantly" },
        seating_functions: { task: "Test power seating functions (e.g., iLevel, tilt)", frequency: "weekly", redFlag: "Contact vendor if functions fail" },
        upholstery: { task: "Clean wheelchair and upholstery", frequency: "monthly", redFlag: "Replace upholstery if torn" },
        seating: { task: "Check seating and supports for wear", frequency: "monthly", redFlag: "Contact vendor if supports are damaged" },
        service: { task: "Complete inspection by authorized dealer", frequency: "yearly", redFlag: "Schedule service if not done annually" }
      },
      "Power Wheelchair without Power Seating Functions": {
        battery: { task: "Check battery level and charge if necessary", frequency: "daily", redFlag: "Contact vendor if battery fails to charge" },
        joystick: { task: "Check joystick panel for damage", frequency: "daily", redFlag: "Contact vendor if joystick is unresponsive" },
        parts: { task: "Ensure all removable parts are securely fastened", frequency: "daily", redFlag: "Contact vendor if parts are loose" },
        belts: { task: "Check positioning belts for wear and buckle functionality", frequency: "daily", redFlag: "Replace belts if worn or buckles fail" },
        tires: { task: "Check tires and inflate (30–45 psi)", frequency: "weekly", redFlag: "Contact vendor if pressure drops significantly" },
        motors: { task: "Listen for unusual motor noises", frequency: "weekly", redFlag: "Contact vendor if noises persist" },
        upholstery: { task: "Clean wheelchair and upholstery", frequency: "monthly", redFlag: "Replace upholstery if torn" },
        seating: { task: "Check seating and supports for wear", frequency: "monthly", redFlag: "Contact vendor if supports are damaged" },
        service: { task: "Complete inspection by authorized dealer", frequency: "yearly", redFlag: "Schedule service if not done annually" }
      },
      "Air Backrest Cushion": {
        cover: { task: "Check cover for tears; machine wash warm, air dry", frequency: "weekly", redFlag: "Replace cover if torn or worn" },
        air_insert: { task: "Check air inserts for punctures; adjust inflation", frequency: "weekly", redFlag: "Contact vendor if punctures or leaks detected" },
        cleaning: { task: "Wipe with damp cloth, no submersion", frequency: "monthly", redFlag: "Contact vendor if cleaning causes damage" },
        service: { task: "Inspect by authorized dealer", frequency: "yearly", redFlag: "Schedule service if not done annually" }
      },
      "Foam Backrest Cushion": {
        cover: { task: "Check cover for tears; machine wash warm, air dry", frequency: "weekly", redFlag: "Replace cover if torn or worn" },
        foam_pad: { task: "Inspect foam pad for degradation", frequency: "monthly", redFlag: "Contact vendor if foam is degraded" },
        lumbar_support: { task: "Check lumbar support for wear; ensure secure attachment", frequency: "monthly", redFlag: "Contact vendor if pad is loose or damaged" },
        cleaning: { task: "Wipe with damp cloth, no submersion", frequency: "monthly", redFlag: "Contact vendor if cleaning causes damage" },
        service: { task: "Inspect by authorized dealer", frequency: "yearly", redFlag: "Schedule service if not done annually" }
      },
      "Foam Seat Cushion": {
        cover: { task: "Check cover for tears; hand wash warm, air dry", frequency: "weekly", redFlag: "Replace cover if torn or worn" },
        foam: { task: "Inspect foam for degradation", frequency: "monthly", redFlag: "Replace foam if contaminated or degraded" },
        cleaning: { task: "Clean cover with mild detergent", frequency: "weekly", redFlag: "Contact vendor if cleaning causes damage" },
        service: { task: "Inspect by authorized dealer", frequency: "yearly", redFlag: "Schedule service if not done annually" }
      },
      "Gel Seat Cushion": {
        cover: { task: "Check cover for tears; machine wash warm, air dry", frequency: "monthly", redFlag: "Replace cover if torn or worn" },
        fluid_pad: { task: "Inspect fluid pad for punctures or degradation", frequency: "monthly", redFlag: "Contact vendor if punctures or leaks detected" },
        foam_base: { task: "Check foam base for consistency", frequency: "monthly", redFlag: "Contact vendor if foam is degraded" },
        assembly: { task: "Ensure proper reassembly after cleaning", frequency: "monthly", redFlag: "Contact vendor if components do not align" },
        service: { task: "Inspect by authorized dealer", frequency: "yearly", redFlag: "Schedule service if not done annually" }
      },
      "Air Seat Cushion": {
        cover: { task: "Check cover for tears; wash with mild detergent, air dry", frequency: "weekly", redFlag: "Replace cover if torn or worn" },
        air_cells: { task: "Check air cells for punctures; adjust inflation", frequency: "weekly", redFlag: "Contact vendor if punctures or leaks detected" },
        valve: { task: "Ensure valve is closed and undamaged", frequency: "weekly", redFlag: "Contact vendor if valve is damaged or leaking" },
        cleaning: { task: "Wipe air cells with damp cloth, no submersion", frequency: "monthly", redFlag: "Contact vendor if cleaning causes damage" },
        service: { task: "Inspect by authorized dealer", frequency: "yearly", redFlag: "Schedule service if not done annually" }
      }
    };

    function setReminders() {
      try {
        const equipmentSelect = document.getElementById("equipment");
        const reminderList = document.getElementById("reminder-list");
        const remindersDiv = document.getElementById("reminders");
        const errorDiv = document.getElementById("error");

        if (!equipmentSelect || !reminderList || !remindersDiv || !errorDiv) {
          throw new Error("One or more DOM elements not found");
        }

        const equipment = equipmentSelect.value;
        if (!equipment || !MAINTENANCE_SCHEDULES[equipment]) {
          errorDiv.textContent = "Please select a valid equipment type.";
          errorDiv.style.display = "block";
          remindersDiv.style.display = "none";
          return;
        }

        errorDiv.style.display = "none";
        reminderList.innerHTML = "";
        const schedule = MAINTENANCE_SCHEDULES[equipment];
        Object.entries(schedule).forEach(([component, { task, frequency, redFlag }]) => {
          const li = document.createElement("li");
          li.innerHTML = `<strong>Component:</strong> ${component}<br><strong>Task:</strong> ${task}<br><strong>Frequency:</strong> ${frequency}<br><strong>Red Flag:</strong> ${redFlag}`;
          reminderList.appendChild(li);
        });
        remindersDiv.style.display = "block";

        if (typeof Notification !== "undefined" && Notification.permission !== "granted") {
          Notification.requestPermission().then(permission => {
            if (permission === "granted") {
              sendNotifications(schedule);
            } else {
              alert("Notifications are disabled. Please enable them in browser settings.");
            }
          });
        } else if (Notification.permission === "granted") {
          sendNotifications(schedule);
        } else {
          alert("This browser does not support notifications.");
        }
      } catch (error) {
        console.error("Error setting reminders:", error);
        const errorDiv = document.getElementById("error");
        if (errorDiv) {
          errorDiv.textContent = "An error occurred. Check the console for details.";
          errorDiv.style.display = "block";
        }
      }
    }

    function sendNotifications(schedule) {
      Object.entries(schedule).forEach(([component, { task, redFlag }]) => {
        new Notification(`Reminder: ${task} for ${component}`, { body: redFlag });
      });
    }

    // Ensure DOM is fully loaded before adding event listeners
    document.addEventListener("DOMContentLoaded", () => {
      const button = document.querySelector(".button");
      if (button) {
        button.addEventListener("click", setReminders);
      } else {
        console.error("Button element not found");
      }
    });
  </script>
</body>
</html>